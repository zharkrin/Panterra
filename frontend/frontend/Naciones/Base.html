<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Submapa de Nación</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #111;
      color: #fff;
    }
    .mapa-container {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }
    .mapa-fondo {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    .icono-draggable {
      width: 48px;
      height: 48px;
      position: absolute;
      cursor: grab;
    }
    .contenedor-iconos {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 8px;
    }
    .contenedor-iconos img {
      margin: 5px;
    }
  </style>
</head>
<body>
  <div class="contenedor-iconos">
    <img src="../assets/iconos/Ciudad.svg" class="icono-draggable" draggable="true" data-icono="Ciudad" alt="Ciudad" />
    <img src="../assets/iconos/Pueblo.svg" class="icono-draggable" draggable="true" data-icono="Pueblo" alt="Pueblo" />
    <img src="../assets/iconos/Puesto_defensivo.svg" class="icono-draggable" draggable="true" data-icono="Puesto_defensivo" alt="Puesto defensivo" />
    <img src="../assets/iconos/Ruinas.svg" class="icono-draggable" draggable="true" data-icono="Ruinas" alt="Ruinas" />
    <img src="../assets/iconos/Mazmorra.svg" class="icono-draggable" draggable="true" data-icono="Mazmorra" alt="Mazmorra" />
    <img src="../assets/iconos/Entrada_infraoscuridad.svg" class="icono-draggable" draggable="true" data-icono="Entrada_infraoscuridad" alt="Entrada a la Infraoscuridad" />
  </div>

  <div class="mapa-container" id="mapaContainer">
    <img src="../assets/mapa_nacion_base.JPG" alt="Mapa base de nación" class="mapa-fondo" />
  </div>

  <script>
    const container = document.getElementById("mapaContainer");

    document.querySelectorAll(".icono-draggable").forEach(icono => {
      icono.addEventListener("dragstart", e => {
        e.dataTransfer.setData("icono", icono.getAttribute("data-icono"));
      });
    });

    container.addEventListener("dragover", e => {
      e.preventDefault();
    });

    container.addEventListener("drop", e => {
      e.preventDefault();
      const tipoIcono = e.dataTransfer.getData("icono");
      if (!tipoIcono) return;

      const nuevoIcono = document.createElement("img");
      nuevoIcono.src = `../assets/iconos/${tipoIcono}.svg`;
      nuevoIcono.classList.add("icono-draggable");
      nuevoIcono.style.left = `${e.offsetX - 24}px`;
      nuevoIcono.style.top = `${e.offsetY - 24}px`;
      nuevoIcono.setAttribute("draggable", "true");
      nuevoIcono.setAttribute("data-icono", tipoIcono);
      container.appendChild(nuevoIcono);
    });
  </script>
</body>
</html>